<!DOCTYPE html>
<html lang="en-US">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>Cupertino: Offline Apple Documentation for AI Agents - Aleahim</title>
    <meta name="description" content="An MCP server that gives Claude Desktop offline access to 22,000+ Apple documentation pages">

    <meta property="og:url" content="https://aleahim.com/blog/cupertino/">
    <meta property="og:title" content="Cupertino: Offline Apple Documentation for AI Agents - Aleahim">
    <meta property="og:description" content="An MCP server that gives Claude Desktop offline access to 22,000+ Apple documentation pages">
    

    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Cupertino: Offline Apple Documentation for AI Agents - Aleahim">
    <meta name="twitter:description" content="An MCP server that gives Claude Desktop offline access to 22,000+ Apple documentation pages">
    

    <link rel="stylesheet" href="https://aleahim.com/css/theme.css">
    <link rel="stylesheet" href="https://aleahim.com/css/style.css">
    <link rel="stylesheet" href="https://aleahim.com/css/blog.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css">
    

    <!-- Umami Analytics -->
    <script defer src="https://cloud.umami.is/script.js" data-website-id="1ee8d39f-4184-4d60-89a3-13131860112a"></script>
</head>

<body>
    <header>
        <div class="header-content">
            <a id="logo" href="https://aleahim.com">
                <img
                    src="https://aleahim.com/images/logo.svg"
                    alt="Aleahim"
                    title="Aleahim"
                >
                <h1 class="site-title">Aleahim.com</h1>
            </a>
    
            <nav>
                <div class="navigation">
                    <a href="https://aleahim.com/">Home</a>
                <a href="https://aleahim.com/cv/">CV</a>
                <a href="https://aleahim.com/services/">Services</a>
                <a href="https://aleahim.com/about/">About</a>
                </div>
            </nav>
        </div>
    </header>

    <main>
    <article class="blog-post">
        <header class="post-header">
            <div class="title-with-thumbnail">
                <div class="post-thumbnail">
                    <img src="https://aleahim.com/images/blog/cupertino/hero.jpg" alt="Cupertino: Offline Apple Documentation for AI Agents">
                </div>
                <div class="title-wrapper">
                    <h1>Cupertino: Offline Apple Documentation for AI Agents</h1>
                    <div class="post-meta">
                        <time datetime="2025-11-28T00:00:00.000Z">November 28, 2025</time>
                    </div>
                </div>
            </div>
        </header>
    
        <div class="post-content">
            <div class="post-hero-image">
                <img src="https://aleahim.com/images/blog/cupertino/hero.jpg" alt="Cupertino: Offline Apple Documentation for AI Agents">
            </div>
    
            <h1>Cupertino: Offline Apple Documentation for AI Agents</h1><p><strong>TL;DR:</strong> I built an MCP server that gives Claude Desktop offline access to 22,000+ Apple documentation pages across 261 frameworks. No more hallucinated APIs.</p><h2 id="the-problem">The Problem</h2><p>If you‚Äôve used Claude or ChatGPT for Swift/iOS development, you‚Äôve seen this:</p><blockquote><p>‚ÄúUse the <code>NavigationView</code> with <code>.navigationBarTitle()</code> modifier‚Ä¶‚Äù</p></blockquote><p>Except <code>NavigationView</code> is deprecated. It‚Äôs <code>NavigationStack</code> now. And the modifier is <code>.navigationTitle()</code>.</p><p>AI models hallucinate APIs. They mix up iOS 14 patterns with iOS 17. They invent methods that don‚Äôt exist. And when you‚Äôre deep in a coding session, these small errors cost you hours.</p><h2 id="the-solution-cupertino">The Solution: Cupertino</h2><p>Cupertino is an MCP (Model Context Protocol) server that:</p><ol><li><strong>Crawls</strong> Apple Developer documentation, Swift Evolution proposals, and Swift.org</li><li><strong>Indexes</strong> everything into a local SQLite FTS5 database with BM25 ranking</li><li><strong>Serves</strong> documentation to Claude Desktop via MCP</li></ol><p>When Claude needs to answer a SwiftUI question, it searches your local documentation instead of relying on training data.</p><h2 id="what-you-get">What You Get</h2><p><strong>22,044 documents across 223 frameworks:</strong></p><p><img src="https://aleahim.com/images/blog/cupertino/frameworks.png" alt="Available Frameworks"><br><em>The documentation index contains 22,044 documents across 223 frameworks, including all major Apple platforms.</em></p><table><thead><td>Framework</td><td>Documents</td></thead><tbody><tr><td>SwiftUI</td><td>5,853</td></tr><tr><td>Swift</td><td>2,814</td></tr><tr><td>UIKit</td><td>1,906</td></tr><tr><td>AppKit</td><td>1,316</td></tr><tr><td>Foundation</td><td>1,219</td></tr><tr><td>Swift.org</td><td>501</td></tr><tr><td>Swift Evolution</td><td>429</td></tr><tr><td>RealityKit</td><td>423</td></tr><tr><td>‚Ä¶</td><td>‚Ä¶</td></tr></tbody></table><p><strong>Two MCP tools:</strong></p><ul><li><code>search_docs</code> - Full-text search with BM25 ranking</li><li><code>list_frameworks</code> - Discover available documentation</li></ul><p><strong>Example search result:</strong></p><pre><code># Search Results for "SwiftUI View"

## 1. View | Apple Developer Documentation
- **Framework:** swiftui
- **URI:** apple-docs://swiftui/documentation_swiftui_view
- **Score:** 1.82
- **Words:** 2,682

Protocol# View
A type that represents part of your app's user interface...
</code></pre><p><img src="https://aleahim.com/images/blog/cupertino/mcp-tools.png" alt="Claude Desktop using Cupertino MCP tools"><br><em>Claude Desktop using Cupertino‚Äôs MCP tools to search documentation and list available frameworks</em></p><h2 id="installation">Installation</h2><h3 id="1.-build-from-source">1. Build from source</h3><pre><code class="language-bash">git clone https://github.com/mihaelamj/cupertino.git
cd cupertino
make build
sudo make install
</code></pre><h3 id="2.-fetch-documentation">2. Fetch documentation</h3><pre><code class="language-bash"># Quick start: Swift Evolution only (~5 minutes)
cupertino fetch --type evolution
cupertino save

# Full documentation (~20-24 hours, one-time)
cupertino fetch --type docs --max-pages 15000
cupertino fetch --type evolution
cupertino save
</code></pre><p><strong>Expected output after indexing:</strong></p><pre><code>‚úÖ Search index built successfully!
   Total documents: 22044
   Frameworks: 261
   Database: /Users/mm/.cupertino/search.db
   Size: 163.6 MB

üí° Tip: Start the MCP server with 'cupertino serve' to enable search
</code></pre><p>Why 20+ hours? The crawler respects Apple‚Äôs servers with a 0.5s delay between requests. 21,000 pages √ó 0.5s = many hours. But it‚Äôs a one-time operation.</p><h3 id="3.-configure-claude-desktop">3. Configure Claude Desktop</h3><p>Edit <code>~/Library/Application Support/Claude/claude_desktop_config.json</code>:</p><pre><code class="language-json">{
  "mcpServers": {
    "cupertino": {
      "command": "/usr/local/bin/cupertino"
    }
  }
}
</code></pre><p>Restart Claude Desktop. Done.</p><h3 id="4.-verify-it-works">4. Verify it works</h3><pre><code class="language-bash">cupertino doctor
</code></pre><pre><code>‚úÖ MCP Server
   ‚úì Server can initialize
   ‚úì Transport: stdio
   ‚úì Protocol version: 2024-11-05

üìö Documentation Directories
   ‚úì Apple docs: ~/.cupertino/docs (21,114 files)
   ‚úì Swift Evolution: ~/.cupertino/swift-evolution (429 proposals)

üîç Search Index
   ‚úì Database: ~/.cupertino/search.db
   ‚úì Size: 156.0 MB
   ‚úì Frameworks: 261

‚úÖ All checks passed - MCP server ready
</code></pre><h2 id="how-it-works">How It Works</h2><pre><code>1. Fetch:  cupertino fetch --type docs
   ‚Üí WKWebView renders JavaScript-heavy pages
   ‚Üí HTML converted to Markdown
   ‚Üí Saved to ~/.cupertino/docs/

2. Save:   cupertino save
   ‚Üí Markdown files indexed into SQLite FTS5
   ‚Üí BM25 ranking for relevance scoring
   ‚Üí ~160MB database for full index

3. Serve:  cupertino serve
   ‚Üí MCP server starts on stdio
   ‚Üí Claude Desktop connects via JSON-RPC
   ‚Üí Search queries hit local database
</code></pre><h2 id="architecture">Architecture</h2><p>Built with Swift 6.2 and strict concurrency:</p><pre><code>Packages/
‚îú‚îÄ‚îÄ MCP/                 # Model Context Protocol implementation
‚îú‚îÄ‚îÄ Search/              # SQLite FTS5 search engine
‚îú‚îÄ‚îÄ Core/                # Crawlers (WKWebView, GitHub API)
‚îú‚îÄ‚îÄ CLI/                 # Command-line interface
‚îî‚îÄ‚îÄ Resources/           # Bundled catalogs (9,699 packages, 606 samples)
</code></pre><p>Key decisions:</p><ul><li><strong>Swift 6.2</strong> with 100% strict concurrency checking</li><li><strong>Actor isolation</strong> for thread-safe state management</li><li><strong>SQLite FTS5</strong> with BM25 for fast, relevant search</li><li><strong>WKWebView</strong> to render Apple‚Äôs JavaScript-heavy documentation</li></ul><h2 id="room-for-improvement">Room for Improvement</h2><p>Honest feedback from testing: the search works, but it‚Äôs not perfect.</p><p><strong>Current limitation:</strong> BM25 treats all documents equally. A search for ‚ÄúSwiftUI‚Äù returns <code>mouseEntered(with:)</code> alongside <code>View</code> protocol because both contain ‚ÄúSwiftUI‚Äù with similar frequency.</p><p><strong>Planned improvements:</strong></p><ol><li><strong>Boost by word count</strong> - Comprehensive docs (2000+ words) rank higher than stub pages (61 words)</li><li><strong>Boost by path depth</strong> - <code>/swiftui/view</code> ranks higher than <code>/swiftui/nshostingview/mouseentered</code></li><li><strong>Document type weighting</strong> - Overview pages rank higher than individual method docs</li><li><strong>Curated importance flags</strong> - Mark foundational docs for priority ranking</li></ol><p>The search is still useful for targeted queries like ‚ÄúSwiftUI NavigationStack‚Äù or ‚ÄúSE-0001‚Äù. Broad queries need work.</p><h2 id="why-i-built-this">Why I Built This</h2><p>I was tired of:</p><ul><li>Claude inventing deprecated APIs</li><li>Switching to Safari to verify every code suggestion</li><li>Losing flow state to documentation lookups</li></ul><p>Now Claude searches my local 160MB documentation database. Same query, same results, every time. Offline. Fast.</p><h2 id="links">Links</h2><ul><li><strong>GitHub:</strong> <a href="https://github.com/mihaelamj/cupertino" target="_blank">github.com/mihaelamj/cupertino</a></li><li><strong>Requirements:</strong> macOS 15+, Swift 6.2+, Xcode 16+</li><li><strong>License:</strong> MIT</li></ul><hr><p><em>Built with Swift, frustration, and too many hours debugging WKWebView concurrency issues.</em></p>
        </div>
    
        <footer class="post-footer">
            <a href="https://aleahim.com/blog/" class="back-link">‚Üê Back to Blog</a>
        </footer>
    </article>

    </main>

    <footer>
        <p>This site was generated using <a href="https://www.swift.org/" target="_blank">Swift</a> & <a href="https://github.com/toucansites/toucan" target="_blank">Toucan</a>.</p>
    
        <p class="small">Aleahim &copy; 2025.</p>
    </footer>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-swift.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-javascript.min.js"></script>
    
</body>
</html>
